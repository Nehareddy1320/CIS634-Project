package food.wastage.project.ui.login;

import food.wastage.project.ui.StackLayout;
import food.wastage.project.ui.signup.Signup;


import javax.swing.*;
import java.awt.*;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

public class Login extends JPanel {

    static class GridPair {
        JLabel label;
        JTextField textField;

        public GridPair(JLabel label, JTextField textField) {
            this.label = label;
            this.textField = textField;
        }

    }

    static class GridPasswordPair extends GridPair {

        public GridPasswordPair(JLabel label, JPasswordField textField) {
            super(label, textField);
            this.label = label;
            this.textField = textField;
        }
    }

    protected GridPair emailAddress;
    protected GridPasswordPair password;
    protected JButton submit;

    public Login() {
        emailAddress = new GridPair(new JLabel("Email: "), new JTextField());

        password = new GridPasswordPair(new JLabel(" Password: "), new JPasswordField());
        submit = new JButton("Login");

        var signup = new JLabel("Don't have an account? ");
        var signup2 = new JLabel("<html><a href=''>Signup</a></html>");
        var signup3 = new JLabel(" instead.");
        signup2.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));

        var f = new JPanel();
        f.setLayout(new GridBagLayout());
        f.add(signup);
        f.add(signup2);
        f.add(signup3);

        GridBagLayout gridLayout = new GridBagLayout();
        setLayout(gridLayout);
        {
            var c = new GridBagConstraints();

            c.gridx = 0;
            c.gridy = 0;
            c.weightx = 0;
            c.anchor = GridBagConstraints.LINE_END;
            add(emailAddress.label, c);
            c.gridx = 1;
            c.fill = GridBagConstraints.HORIZONTAL;
            c.weightx = 1;
            add(emailAddress.textField, c);

            c.gridx = 0;
            c.gridy += 1;
            c.weightx = 0;
            add(password.label, c);
            c.gridx = 1;
            c.fill = GridBagConstraints.HORIZONTAL;
            c.weightx = 1;
            add(password.textField, c);

            c.gridx = 1;
            c.gridy += 1;
            c.weightx = 0;
            c.fill = GridBagConstraints.NONE;
            c.anchor = GridBagConstraints.LINE_END;
            add(submit, c);

            c.gridy += 1;
            c.gridx = 1;
            c.anchor = GridBagConstraints.LINE_START;
            add(f, c);
        }

        setVisible(true);
        setSize(600, 300);

        final var base = this;
        // EVENTS
        submit.addActionListener(e -> base.onSubmit());

        signup2.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseClicked(MouseEvent e) {
                base.onSignUpInstead();
            }

        });

    }

    void onSubmit(){}

    Signup signup;
    StackLayout stackLayout;
    public void addSignupComponent(Signup signup, StackLayout stackLayout){
        this.signup = signup;
        this.stackLayout = stackLayout;
    }

    void onSignUpInstead(){
        System.out.println("Signing Up instead");
        stackLayout.showComponent(signup, this.getParent());
    }

    public static void main(String[] args) {
        new Login();
    }

}
